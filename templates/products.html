<h2>Products List</h2>

<a href="/add_product">Add Product</a>

<table border="1">
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Qty</th>
        <th>Price</th>
        <th>Action</th>
    </tr>

    {% for p in products %}
    <tr>
        <td>{{ p[0] }}</td>
        <td>{{ p[1] }}</td>
        <td>{{ p[2] }}</td>
        <td>{{ p[3] }}</td>
        <td>
            <a href="/delete_product/{{ p[0] }}">Delete</a>
            <a href="/edit_product/{{ p[0] }}">Edit</a> 

        </td>
    </tr>
    {% endfor %}
</table>

<a href="/dashboard">Back</a>
<form method="get">

    <input type="text" name="search" placeholder="Search product"
           value="{{ request.args.get('search','') }}">

    <select name="category">
        <option value="">All Categories</option>
        {% for c in categories %}
        <option value="{{ c[0] }}"
            {% if request.args.get('category') == c[0]|string %}selected{% endif %}>
            {{ c[1] }}
        </option>
        {% endfor %}
    </select>

    <select name="supplier">
        <option value="">All Suppliers</option>
        {% for s in suppliers %}
        <option value="{{ s[0] }}"
            {% if request.args.get('supplier') == s[0]|string %}selected{% endif %}>
            {{ s[1] }}
        </option>
        {% endfor %}
    </select>

    <button type="submit">Search</button>

</form>
<a href="/stock/{{ p[0] }}">Update Stock</a>
<a href="/sell/{{ p[0] }}">Sell</a>

