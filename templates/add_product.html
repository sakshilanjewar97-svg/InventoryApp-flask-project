<h2>Add Product</h2>

<form method="POST">
    <input type="text" name="name" placeholder="Product Name" required>
    <input type="number" name="quantity" placeholder="Quantity" required>
    <input type="number" step="0.01" name="price" placeholder="Price" required>

    <select name="category" required>
        <option value="">Select Category</option>
        {% for c in categories %}
        <option value="{{ c[0] }}">{{ c[1] }}</option>
        {% endfor %}
    </select>

    <select name="supplier" required>
        <option value="">Select Supplier</option>
        {% for s in suppliers %}
        <option value="{{ s[0] }}">{{ s[1] }}</option>
        {% endfor %}
    </select>

    <select name="category">
    {% for c in categories %}
    <option value="{{ c[0] }}" {% if c[0]==product[4] %}selected{% endif %}>{{ c[1] }}</option>
    {% endfor %}
</select>

<select name="supplier">
    {% for s in suppliers %}
    <option value="{{ s[0] }}" {% if s[0]==product[5] %}selected{% endif %}>{{ s[1] }}</option>
    {% endfor %}
</select>


    <button>Add</button>
</form>

<a href="/products">Back</a>

<h2>Edit Product</h2>

<form method="POST">
    <input type="text" name="name" value="{{ product[1] }}" required>
    <input type="number" name="quantity" value="{{ product[2] }}" required>
    <input type="number" step="0.01" name="price" value="{{ product[3] }}" required>

    <select name="category">
        {% for c in categories %}
        <option value="{{ c[0] }}" {% if c[0] == product[4] %}selected{% endif %}>{{ c[1] }}</option>
        {% endfor %}
    </select>

    <select name="supplier">
        {% for s in suppliers %}
        <option value="{{ s[0] }}" {% if s[0] == product[5] %}selected{% endif %}>{{ s[1] }}</option>
        {% endfor %}
    </select>

    <button>Update</button>
</form>

<a href="/products">Back</a>

<h2>Products List</h2>

<a href="/add_product">Add Product</a>

<table border="1">
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Qty</th>
        <th>Price</th>
        <th>Category</th>
        <th>Supplier</th>
        <th>Action</th>
    </tr>

    {% for p in products %}
    <tr>
        <td>{{ p[0] }}</td>
        <td>{{ p[1] }}</td>
        <td>{{ p[2] }}</td>
        <td>{{ p[3] }}</td>
        <td>{{ p[4] }}</td>  <!-- optional: join to category name later -->
        <td>{{ p[5] }}</td>  <!-- optional: join to supplier name later -->
        <td>
            <a href="/edit_product/{{ p[0] }}">Edit</a> |
            <a href="/delete_product/{{ p[0] }}">Delete</a>
        </td>
    </tr>
    {% endfor %}
</table>

<a href="/dashboard">Back</a>
